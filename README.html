<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.12: http://docutils.sourceforge.net/" />
<title>bstest user manual</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7614 2013-02-21 15:55:51Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="bstest-user-manual">
<h1 class="title">bstest user manual</h1>

<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<tbody valign="top">
<tr><td><strong>Title</strong></td>
<td>bstest-s3esk (Buttons and switches test)</td>
</tr>
<tr><td><strong>Author</strong></td>
<td>Nikolaos Kavvadias (C) 2014</td>
</tr>
<tr><td><strong>Contact</strong></td>
<td><a class="reference external" href="mailto:nikos&#64;nkavvadias.com">nikos&#64;nkavvadias.com</a></td>
</tr>
<tr><td><strong>Website</strong></td>
<td><a class="reference external" href="http://www.nkavvadias.com">http://www.nkavvadias.com</a></td>
</tr>
<tr><td><strong>Release Date</strong></td>
<td>10 July 2016</td>
</tr>
<tr><td><strong>Version</strong></td>
<td>1.0.2</td>
</tr>
<tr><td><strong>Rev. history</strong></td>
<td>&nbsp;</td>
</tr>
<tr><td><strong>v1.0.2</strong></td>
<td><p class="first">2016-07-10</p>
<p class="last">Update for 2016.</p>
</td>
</tr>
<tr><td><strong>v1.0.1</strong></td>
<td><p class="first">2014-06-18</p>
<p class="last">Changed README to README.rst; COPYING to LICENSE.</p>
</td>
</tr>
<tr><td><strong>v1.0.0</strong></td>
<td><p class="first">2014-06-09</p>
<p class="last">Initial release for the Spartan-3E Starter kit board.</p>
</td>
</tr>
</tbody>
</table>
<div class="section" id="introduction">
<h1>1. Introduction</h1>
<p><tt class="docutils literal">bstest</tt> is a very simple design for testing push buttons, slide switches and
discrete LEDs available on the Spartan-3E Starter Kit board by Xilinx Inc.</p>
</div>
<div class="section" id="file-listing">
<h1>2. File listing</h1>
<p>The bstest distribution includes the following files:</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<tbody valign="top">
<tr><td>/bstest-s3esk</td>
<td>Top-level directory</td>
</tr>
<tr><td>AUTHORS</td>
<td>List of authors.</td>
</tr>
<tr><td>LICENSE</td>
<td>3-clause modified BSD license.</td>
</tr>
<tr><td>README.rst</td>
<td>This file.</td>
</tr>
<tr><td>README.html</td>
<td>HTML version of README.rst.</td>
</tr>
<tr><td>README.pdf</td>
<td>PDF version of README.rst.</td>
</tr>
<tr><td>bstest.ucf</td>
<td>User Constraints File for the XC3S500E-FG320-4
device.</td>
</tr>
<tr><td>bstest.vhd</td>
<td>The top-level RTL VHDL design file.</td>
</tr>
<tr><td>bstest-syn.sh</td>
<td>Bash shell script for synthesizing the <tt class="docutils literal">bstest</tt>
design with Xilinx ISE.</td>
</tr>
<tr><td>impact_s3esk.bat</td>
<td>Windows Batch file for automatically invoking Xilinx
Impact in order to download the generated bitstream
to the target hardware.</td>
</tr>
<tr><td>rst2docs.sh</td>
<td>Bash script for generating the HTML and PDF versions.</td>
</tr>
<tr><td>xst.mk</td>
<td>Standard Makefile for command-line usage of ISE.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="usage">
<h1>3. Usage</h1>
<p>The bstest distribution includes scripts for logic synthesis automation
supporting Xilinx ISE. The corresponding synthesis script can be edited in order
to specify the following for adapting to the user's setup:</p>
<ul class="simple">
<li><tt class="docutils literal">XDIR</tt>: the path to the <tt class="docutils literal">/bin</tt> subdirectory of the Xilinx ISE/XST
installation where the <tt class="docutils literal">xst.exe</tt> executable is placed</li>
<li><tt class="docutils literal">arch</tt>: specific FPGA architecture (device family) to be used for synthesis</li>
<li><tt class="docutils literal">part</tt>: specific FPGA part (device) to be used for synthesis</li>
</ul>
<div class="section" id="running-the-synthesis-script">
<h2>3.1. Running the synthesis script</h2>
<p>For running the Xilinx ISE synthesis tool, generating FPGA configuration
bistream and downloading to the target device, execute the corresponding script
from within the <tt class="docutils literal"><span class="pre">bstest-s3esk</span></tt> directory:</p>
<div class="line-block">
<div class="line"><tt class="docutils literal">$ <span class="pre">./bstest-syn.sh</span></tt></div>
</div>
<p>In order to successfully run the entire process, you should have the target
board connected to the host and it should be powered on.</p>
<p>The synthesis procedure invokes several Xilinx ISE command-line tools for logic
synthesis as described in the corresponding Makefile, found in the
the <tt class="docutils literal"><span class="pre">bstest-s3esk</span></tt> directory.</p>
<p>Typically, this process includes the following:</p>
<ul class="simple">
<li>Generation of the <tt class="docutils literal">*.xst</tt> synthesis script file.</li>
<li>Generation of the <tt class="docutils literal">*.ngc</tt> gate-level netlist file in NGC format.</li>
<li>Building the corresponding <tt class="docutils literal">*.ngd</tt> file.</li>
<li>Performing mapping using <tt class="docutils literal">map</tt> which generates the corresponding <tt class="docutils literal">*.ncd</tt>
file.</li>
<li>Place-and-routing using <tt class="docutils literal">par</tt> which updates the corresponding <tt class="docutils literal">*.ncd</tt>
file.</li>
<li>Tracing critical paths using <tt class="docutils literal">trce</tt> for reoptimizing the <tt class="docutils literal">*.ncd</tt> file.</li>
<li>Bitstream generation (<tt class="docutils literal">*.bit</tt>) using <tt class="docutils literal">bitgen</tt>, however with unused pins.</li>
</ul>
<p>As a result of this process, the <tt class="docutils literal">bstest.bit</tt> bitstream file is produced.</p>
<p>Then, the shell script invokes the Xilinx IMPACT tool by a Windows batch file,
automatically passing a series of commands that are necessary for configuring
the target FPGA device:</p>
<ol class="arabic simple">
<li>Set mode to binary scan.</li>
</ol>
<div class="line-block">
<div class="line"><tt class="docutils literal">setMode <span class="pre">-bs</span></tt></div>
</div>
<ol class="arabic simple" start="2">
<li>Set cable port detection to auto (tests various ports).</li>
</ol>
<div class="line-block">
<div class="line"><tt class="docutils literal">setCable <span class="pre">-p</span> auto</tt></div>
</div>
<ol class="arabic simple" start="3">
<li>Identify parts and their order in the scan chain.</li>
</ol>
<div class="line-block">
<div class="line"><tt class="docutils literal">identify</tt></div>
</div>
<ol class="arabic simple" start="4">
<li>Assign the bitstream to the first part in the scan chain.</li>
</ol>
<div class="line-block">
<div class="line"><tt class="docutils literal">assignFile <span class="pre">-p</span> 1 <span class="pre">-file</span> bstest.bit</tt></div>
</div>
<ol class="arabic simple" start="5">
<li>Program the selected device.</li>
</ol>
<div class="line-block">
<div class="line"><tt class="docutils literal">program <span class="pre">-p</span> 1</tt></div>
</div>
<ol class="arabic simple" start="6">
<li>Exit IMPACT.</li>
</ol>
<div class="line-block">
<div class="line"><tt class="docutils literal">exit</tt></div>
</div>
</div>
</div>
<div class="section" id="prerequisites">
<h1>4. Prerequisites</h1>
<ul class="simple">
<li>[suggested] MinGW environment on Windows 7 (64-bit).</li>
<li>Xilinx ISE (free ISE webpack is available from the Xilinx website):
<a class="reference external" href="http://www.xilinx.com">http://www.xilinx.com</a>.
The 14.6 version on Windows 7/64-bit is known to work.</li>
</ul>
</div>
</div>
</body>
</html>
